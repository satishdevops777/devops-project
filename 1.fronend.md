# RoboShop ‚Äì Frontend & MongoDB Setup

This document explains the **Frontend (Nginx)** and **MongoDB** setup for the RoboShop application. It is written in a **GitHub‚Äëready README.md format** and follows **real‚Äëworld DevOps / SRE practices**.

---

# 1Ô∏è‚É£ Frontend (Nginx)

## üìå What is the Frontend?

The **Frontend** is a web service responsible for serving the **UI (webframe)** of the RoboShop application to end users.

It uses **Nginx** to:

* Serve static web content
* Act as a reverse proxy to backend microservices
* Provide a health endpoint for monitoring

---

## üß± Responsibilities of the Frontend Service

### 1Ô∏è‚É£ Serve Web Content

The frontend serves static UI files such as:

* HTML
* CSS
* JavaScript
* Images

Example structure:

```text
/index.html
/css/style.css
/js/app.js
```

These files form the **webframe (UI)** that users interact with in their browser.

---

### 2Ô∏è‚É£ Reverse Proxy to Backend Services

The frontend **does not contain business logic**.

Instead, it forwards API calls to backend microservices such as:

```text
catalogue
user
cart
shipping
payment
```

Example request flow:

```text
Browser ‚Üí Nginx (Frontend) ‚Üí Catalogue Service ‚Üí MongoDB
```

---

### 3Ô∏è‚É£ Central Entry Point (Single URL)

Users access the application using **one URL**:

```text
https://roboshop.example.com
```

Nginx internally routes requests:

```text
/api/catalogue ‚Üí catalogue service
/api/cart      ‚Üí cart service
```

This avoids exposing backend services directly to the internet.

---

## üîß Frontend Installation & Configuration

### 1. Install Nginx

```bash
dnf install nginx -y
```

### 2. Enable & Start Nginx

```bash
systemctl enable nginx
systemctl start nginx
```

### 3. Remove Default Web Content

```bash
rm -rf /usr/share/nginx/html/*
```

### 4. Download Frontend Artifacts

```bash
curl -o /tmp/frontend.zip https://roboshop-artifacts.s3.amazonaws.com/frontend.zip
```

### 5. Extract Frontend Content

```bash
cd /usr/share/nginx/html
unzip /tmp/frontend.zip
```

### 6. Create Reverse Proxy Configuration

```bash
vim /etc/nginx/default.d/roboshop.conf
```

---

## üîÅ Nginx Configuration Explained

### proxy_http_version 1.1;

```nginx
proxy_http_version 1.1;
```

**Why this is important**:

* HTTP/1.0 ‚Üí New connection per request ‚ùå
* HTTP/1.1 ‚Üí Connection reuse (keep‚Äëalive) ‚úÖ

Impact:

* Lower latency
* Less CPU usage
* Better scalability

---

### Static Images Handling

```nginx
location /images/ {
  expires 5s;
  root /usr/share/nginx/html;
  try_files $uri /images/placeholder.jpg;
}
```

**Explanation**:

* Matches all requests starting with `/images/`
* Caches images for **5 seconds**
* Falls back to `placeholder.jpg` if the image is missing

Benefits:

* No broken images
* Better user experience
* Controlled caching

---

### API Reverse Proxy Rules

```nginx
location /api/catalogue/ { proxy_pass http://localhost:8080/; }
location /api/user/      { proxy_pass http://localhost:8080/; }
location /api/cart/      { proxy_pass http://localhost:8080/; }
location /api/shipping/  { proxy_pass http://localhost:8080/; }
location /api/payment/   { proxy_pass http://localhost:8080/; }
```

> ‚ö†Ô∏è Replace `localhost` with the **actual backend server IPs** in production.

---

### /health ‚Äì Health Check Endpoint

```nginx
location /health {
  stub_status on;
  access_log off;
}
```

**What this does**:

* Exposes Nginx internal metrics
* Used by load balancers, Kubernetes, and monitoring systems

Sample output:

```text
Active connections: 2
server accepts handled requests
1200 1200 4500
Reading: 0 Writing: 1 Waiting: 1
```

**Checks**:

* ‚úÖ Nginx process is alive
* ‚úÖ Nginx can accept connections

**Does NOT check**:

* ‚ùå Backend services
* ‚ùå Database health

---

### access_log off;

Disables access logging **only for /health** endpoint.

Benefits:

* Prevents log flooding
* Avoids disk exhaustion
* Keeps logs clean

---

### Restart Nginx

```bash
systemctl restart nginx
```

---
